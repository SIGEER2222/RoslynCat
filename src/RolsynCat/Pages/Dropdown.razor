@page "/dropdown"
@using System.Linq

<div class="dropdown-container">
    <div class="dropdown-button" @onclick="ToggleDropdown">
        C#示例代码学习
    </div>
    @if (IsDropdownVisible) {
        <div class="dropdown-menu">
            @foreach (var group in Options.GroupBy(o => o.Group)) {
                <div class="dropdown-group">
                    <div class="dropdown-group-header">
                        @group.Key
                    </div>
                    @foreach (var option in group) {
                        <div class="dropdown-option" @onclick="() => OptionSelected(option)">
                            @option.Text
                        </div>
                    }
                </div>
            }
        </div>
    }
</div>

@code {
    private bool IsDropdownVisible { get; set; }
    private List<Option> Options { get; set; } = new List<Option>
            {
            new Option { Group = "C#基础", Text = "关键字" },
            new Option { Group = "C#基础", Text = "操作符" },
            new Option { Group = "C#基础", Text = "控制语句" },
            new Option { Group = "C#基础", Text = "数组" },
            new Option { Group = "C#基础", Text = "类型系统" },
            new Option { Group = "C#基础", Text = "方法" },
            new Option { Group = "C# Advanced", Text = "Delegates and Events" },
            new Option { Group = "C# Advanced", Text = "Generics" },
            new Option { Group = "C# Advanced", Text = "LINQ" },
            new Option { Group = "C# Advanced", Text = "Multithreading" },
            new Option { Group = "C# Advanced", Text = "Asynchronous Programming" },
            new Option { Group = "C# Advanced", Text = "Reflection" },
        };

    private class Option
    {
        public string Group { get; set; }
        public string Text { get; set; }
    }

    private void ToggleDropdown() {
        IsDropdownVisible = !IsDropdownVisible;
    }

    private void OptionSelected(Option option) {
        Console.WriteLine($"Selected option: {option.Text}");
        IsDropdownVisible = false;
    }
}
